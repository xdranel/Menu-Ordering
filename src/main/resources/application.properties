# Database
spring.datasource.url=${DB_URL:jdbc:mysql://localhost:3306/restaurant_db}
spring.datasource.username=${DB_USERNAME:root}
spring.datasource.password=${DB_PASSWORD:password}

# HikariCP Connection Pool Configuration
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000
spring.datasource.hikari.connection-test-query=SELECT 1

# Hibernate
# IMPORTANT: Use 'validate' or 'none' in production, 'update' only for development
spring.jpa.hibernate.ddl-auto=${HIBERNATE_DDL_AUTO:update}
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect
# Disable SQL logging in production
spring.jpa.show-sql=${HIBERNATE_SHOW_SQL:false}
spring.jpa.properties.hibernate.format_sql=false
# Set timezone to Asia/Jakarta (WIB, UTC+7)
spring.jpa.properties.hibernate.jdbc.time_zone=Asia/Jakarta

# Flyway - Enable for first-time setup, then disable
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true

# Session Management
spring.session.store-type=jdbc
spring.session.jdbc.initialize-schema=always
spring.session.timeout=8h

# Server
# Support both PORT (Railway/Heroku) and SERVER_PORT (VPS) environment variables
server.port=${SERVER_PORT:${PORT:8080}}
server.servlet.session.timeout=8h
server.servlet.session.tracking-modes=COOKIE
server.compression.enabled=true
server.compression.mime-types=text/html,text/xml,text/plain,text/css,text/javascript,application/javascript,application/json
server.http2.enabled=true

# Thymeleaf
spring.thymeleaf.prefix=classpath:/templates/
spring.thymeleaf.suffix=.html
spring.thymeleaf.mode=HTML
spring.thymeleaf.encoding=UTF-8
spring.thymeleaf.servlet.content-type=text/html
# Enable cache in production for better performance
spring.thymeleaf.cache=${THYMELEAF_CACHE:false}

# Security
spring.security.bcrypt.strength=10

# Application
app.name=ChopChop Restaurant
app.currency=IDR
app.qr-code.enabled=true

# Jackson - JSON Serialization with Asia/Jakarta timezone
spring.jackson.time-zone=Asia/Jakarta
spring.jackson.locale=id_ID
# Serialize dates as ISO-8601 strings instead of arrays
spring.jackson.serialization.write-dates-as-timestamps=false

# File Upload
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# Logging - Use INFO in production, DEBUG only for local development
logging.level.org.springframework.security=${LOG_LEVEL_SECURITY:INFO}
logging.level.menuorderingapp.project=${LOG_LEVEL_APP:INFO}
